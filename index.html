<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login amb Google</title>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <meta name="google-signin-client_id" content="374222587224-3bv1vgv6g4228p5filri3det5b63l2if.apps.googleusercontent.com">

</head>
<body>
    <div id="g_id_onload"
         data-client_id="374222587224-3bv1vgv6g4228p5filri3det5b63l2if.apps.googleusercontent.com"
         data-callback="onSignIn">
    </div>
    <div class="g_id_signin"
         data-type="standard">
    </div>

    <button id="boto-sortir" style="display:none;" onclick="signOut()">
        Desconnectar
    </button>

    <script>
        function onSignIn(response) {
            // Quan l'usuari fa login:
            // 1. Mostrem el botó de sortir
            document.getElementById('boto-sortir').style.display = 'block';
            // 2. Amaguem el botó de Google
            document.querySelector('.g_id_signin').style.display = 'none';
        }

        function signOut() {
            // Quan l'usuari es desconnecta:
            // 1. Amaguem el botó de sortir
            document.getElementById('boto-sortir').style.display = 'none';
            // 2. Tornem a mostrar el botó de Google
            document.querySelector('.g_id_signin').style.display = 'block';
            
            // Això tanca la sessió de Google perquè et torni a demanar usuari
            google.accounts.id.disableAutoSelect();
        }
    </script>

</body>
</html>